import{a as V,b as q,c as z,d as A}from"./chunk-Z2P47XQY.js";import{f as H,j as R}from"./chunk-PPGZATS7.js";import{A as y,D as M,Da as w,Eb as D,Fb as N,Ha as d,Hb as W,K as b,Nb as k,Ob as E,P as v,Sa as u,T as O,Ta as s,Ua as a,Wa as F,Xa as g,Ya as f,Z as S,_ as T,bb as I,db as P,eb as B,fb as x,gb as j,i as h,m as p,q as C,ta as c,xa as l,y as _}from"./chunk-SRUSGTWF.js";var m=class n{constructor(e){this.http=e}search(e){if(!e.trim())return p([]);let t=new k().set("query",e).set("fmt","json").set("limit","10");return this.http.get("https://musicbrainz.org/ws/2/artist",{params:t}).pipe(C(r=>(r.artists||[]).sort((o,i)=>(i.score||0)-(o.score||0)).map(o=>({id:o.id,name:o.name}))),_(()=>p([])))}static \u0275fac=function(t){return new(t||n)(O(E))};static \u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})};function J(n,e){if(n&1){let t=F();s(0,"li",4),g("click",function(){let o=S(t).$implicit,i=f(2);return T(i.goToBand(o))}),I(1),a()}if(n&2){let t=e.$implicit;c(),P(" ",t.name," ")}}function K(n,e){if(n&1&&(s(0,"ul"),d(1,J,2,1,"li",3),a()),n&2){let t=f();c(),u("ngForOf",t.suggestions)}}var L=class n{constructor(e,t){this.bandSearch=e;this.router=t}searchTerm="";suggestions=[];searchTerms=new h;searchSub;ngOnInit(){this.searchSub=this.searchTerms.pipe(y(300),M(),b(e=>this.bandSearch.search(e))).subscribe(e=>this.suggestions=e)}ngOnDestroy(){this.searchSub?.unsubscribe()}search(e){this.searchTerms.next(e)}goToBand(e){this.router.navigate(["/find-my-concert",e.name])}static \u0275fac=function(t){return new(t||n)(l(m),l(H))};static \u0275cmp=w({type:n,selectors:[["app-find-my-concert"]],decls:3,vars:2,consts:[[1,"find-my-concert-search"],["type","text","placeholder","Suche Bands weltweit...",3,"ngModelChange","ngModel"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(t,r){t&1&&(s(0,"div",0)(1,"input",1),j("ngModelChange",function(i){return x(r.searchTerm,i)||(r.searchTerm=i),i}),g("ngModelChange",function(i){return r.search(i)}),a(),d(2,K,2,1,"ul",2),a()),t&2&&(c(),B("ngModel",r.searchTerm),c(),u("ngIf",r.suggestions.length))},dependencies:[W,D,N,A,V,q,z,R],styles:[".find-my-concert-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem}.find-my-concert-search[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:.5rem}.find-my-concert-search[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.25rem 0;cursor:pointer}.find-my-concert-search[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{L as FindMyConcertComponent};
