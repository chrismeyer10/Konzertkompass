import './polyfills.server.mjs';
import{a as W,b as $,c as z,d as A}from"./chunk-OMVFIKSH.mjs";import{$a as p,A as y,Ea as L,H as M,Ia as m,M as T,Q as w,Va as o,W as v,Wa as r,Wb as D,X as C,Xa as a,Xb as V,Ya as B,Za as S,Zb as N,_a as g,eb as l,f as O,fb as _,gb as F,gc as U,hb as P,ib as k,j as u,jb as j,n as h,sa as x,ua as i,v as b,x as E,ya as I}from"./chunk-ISIULIEZ.mjs";import"./chunk-X2SEQXRR.mjs";var f=class n{constructor(t){this.http=t}bands=[];loaded=!1;loadBands(){return this.loaded?u(this.bands):this.http.get("/bands.json").pipe(h(t=>(this.bands=t,this.loaded=!0,t)),b(()=>u([])))}search(t){if(!t.trim())return u([]);let e=t.toLowerCase();return this.loadBands().pipe(h(s=>s.filter(d=>d.name.toLowerCase().startsWith(e)).slice(0,10)),b(()=>u([])))}static \u0275fac=function(e){return new(e||n)(w(U))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})};function Y(n,t){if(n&1&&(r(0,"li"),l(1),a()),n&2){let e=t.$implicit;i(),_(e)}}function q(n,t){if(n&1&&(r(0,"ul",11),m(1,Y,2,1,"li",12),a()),n&2){let e=p().$implicit;i(),o("ngForOf",e.upcomingEvents)}}function G(n,t){n&1&&(r(0,"div",11)(1,"em"),l(2,"Keine Auftritte in den n\xE4chsten 3 Wochen"),a()())}function J(n,t){if(n&1){let e=S();r(0,"li",6),g("click",function(){let d=v(e).$implicit,c=p(2);return C(c.addBand(d))}),B(1,"img",7),r(2,"div",8)(3,"div",9),l(4),a(),m(5,q,2,1,"ul",10)(6,G,3,0,"div",10),a()()}if(n&2){let e=t.$implicit;i(),o("src",e.imageUrl,x)("alt",e.name),i(3),_(e.name),i(),o("ngIf",e.upcomingEvents==null?null:e.upcomingEvents.length),i(),o("ngIf",e.upcomingEvents&&!e.upcomingEvents.length)}}function Q(n,t){if(n&1&&(r(0,"ul"),m(1,J,7,5,"li",5),a()),n&2){let e=p();i(),o("ngForOf",e.suggestions)}}function X(n,t){if(n&1&&(r(0,"li"),l(1),a()),n&2){let e=t.$implicit;i(),_(e)}}function Z(n,t){if(n&1&&(r(0,"ul",11),m(1,X,2,1,"li",12),a()),n&2){let e=p().$implicit;i(),o("ngForOf",e.upcomingEvents)}}function ee(n,t){n&1&&(r(0,"div",11)(1,"em"),l(2,"Keine Auftritte in den n\xE4chsten 3 Wochen"),a()())}function te(n,t){if(n&1){let e=S();r(0,"li",13),B(1,"img",7),r(2,"div",8)(3,"div",9),l(4),r(5,"button",14),g("click",function(d){let c=v(e).$implicit;return p().removeBand(c),C(d.stopPropagation())}),l(6," Remove "),a()(),m(7,Z,2,1,"ul",10)(8,ee,3,0,"div",10),a()()}if(n&2){let e=t.$implicit;i(),o("src",e.imageUrl,x)("alt",e.name),i(3),F(" ",e.name," "),i(3),o("ngIf",e.upcomingEvents==null?null:e.upcomingEvents.length),i(),o("ngIf",e.upcomingEvents&&!e.upcomingEvents.length)}}var H=class n{constructor(t){this.bandSearch=t}searchTerm="";suggestions=[];bands=[];searchTerms=new O;searchSub;ngOnInit(){this.searchSub=this.searchTerms.pipe(E(300),y(),M(t=>this.bandSearch.search(t))).subscribe(t=>this.suggestions=t)}ngOnDestroy(){this.searchSub?.unsubscribe()}search(t){this.searchTerms.next(t)}addBand(t){this.bands.push(t),this.searchTerm="",this.suggestions=[]}removeBand(t){this.bands=this.bands.filter(e=>e.id!==t.id)}static \u0275fac=function(e){return new(e||n)(I(f))};static \u0275cmp=L({type:n,selectors:[["app-band-list"]],decls:9,vars:3,consts:[[1,"band-list"],["name","band","placeholder","Search bands",3,"ngModelChange","ngModel"],[4,"ngIf"],[1,"your-bands"],["class","band-item",4,"ngFor","ngForOf"],["class","band-item",3,"click",4,"ngFor","ngForOf"],[1,"band-item",3,"click"],[3,"src","alt"],[1,"band-info"],[1,"band-name"],["class","events",4,"ngIf"],[1,"events"],[4,"ngFor","ngForOf"],[1,"band-item"],[3,"click"]],template:function(e,s){e&1&&(r(0,"div",0)(1,"h2"),l(2,"Band Search"),a(),r(3,"input",1),j("ngModelChange",function(c){return k(s.searchTerm,c)||(s.searchTerm=c),c}),g("ngModelChange",function(c){return s.search(c)}),a(),m(4,Q,2,1,"ul",2),r(5,"h3"),l(6,"Your Bands"),a(),r(7,"ul",3),m(8,te,9,5,"li",4),a()()),e&2&&(i(3),P("ngModel",s.searchTerm),i(),o("ngIf",s.suggestions.length),i(4),o("ngForOf",s.bands))},dependencies:[N,D,V,A,W,$,z],styles:['@charset "UTF-8";.band-list[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto;padding:1.5rem;background:#ffffff1a;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);border-radius:16px;box-shadow:0 0 15px #00000080}input[_ngcontent-%COMP%]{width:100%;padding:.5rem;margin-bottom:.5rem;border:none;border-radius:4px}ul[_ngcontent-%COMP%]{list-style:none;padding:0}.band-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5rem;padding:.25rem 0;cursor:pointer}.band-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:cover;border-radius:50%;margin-right:.5rem}.band-info[_ngcontent-%COMP%]{flex:1}.events[_ngcontent-%COMP%]{margin-left:1rem;font-size:.9rem;cursor:default}.events[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"\\1f3a4"}.events[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:default}']})};export{H as BandListComponent};
